<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Your Cart | CardsLawp</title>
<script src="https://unpkg.com/lucide@latest"></script>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:'Arial',sans-serif; }
body { background:#333; color:#fff; padding-top:80px; text-align:center; }
.navbar { position: fixed; top:0; width:100%; display:flex; justify-content:space-between; align-items:center; padding:10px 5vw; background: rgba(0,0,0,0.5); border-radius:0 0 15px 15px; z-index:1000; }
.navbar .logo { font-size:1.5em; font-weight:bold; color:#fff; }
.navbar .nav-links a { margin-left:20px; padding:8px 15px; border:none; background: rgba(255,255,255,0.15); color:#fff; border-radius:10px; text-decoration:none; transition:0.3s; }
.navbar .nav-links a:hover, .navbar .nav-links a.active { background: rgba(255,255,255,0.35); }
.cart-container { display:flex; flex-direction:column; align-items:center; gap:15px; padding:20px; }
.cart-item { background: rgba(255,255,255,0.15); border-radius:15px; padding:20px; width:90%; max-width:400px; display:flex; flex-direction:column; align-items:center; position:relative; }
.cart-item img { width:100%; border-radius:10px; }
.cart-item h2 { margin:10px 0 5px; display:flex; align-items:center; gap:6px; }
.cart-item input[type="checkbox"] { position:absolute; top:10px; left:10px; transform: scale(1.5); }
.remove-btn { position:absolute; top:10px; right:10px; background:none; border:none; color:#ff5f5f; cursor:pointer; }
.total { margin-top:25px; font-size:22px; font-weight:bold; }
button { background:#00bcd4; color:#fff; border:none; padding:12px 25px; border-radius:10px; cursor:pointer; margin-top:25px; display:inline-flex; align-items:center; gap:10px; }
button:hover { background:#0097a7; }
.select-all { margin:15px 0; font-size:18px; display:flex; align-items:center; justify-content:center; gap:8px; }

/* MOBILE */
@media (max-width:768px){
  .navbar { flex-direction: column; gap:10px; }
  .navbar .nav-links { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; }
  .cart-item { width:95%; }
  .total { font-size:5vw; }
  button { font-size:4vw; padding:3vw 6vw; }
}
</style>
</head>
<body>

<div class="navbar">
  <div class="logo"><i data-lucide="credit-card"></i> CardsLawp</div>
  <div class="nav-links">
    <a href="/" ><i data-lucide="home"></i> Home</a>
    <a href="cart.html" class="active"><i data-lucide="shopping-cart"></i> Cart</a>
    <a href="/login"><i data-lucide="user"></i> Login</a>
  </div>
</div>

<h1><i data-lucide="shopping-bag"></i> Your Cart</h1>

<div class="select-all">
  <label><input type="checkbox" id="selectAll" checked> Select All</label>
</div>

<div class="cart-container" id="cartItems"></div>
<div class="total" id="cartTotal">Total: $0</div>

<button id="checkoutBtn"><i data-lucide="credit-card"></i> Pay with PayPal</button>

<script>
lucide.createIcons();

let cart = JSON.parse(localStorage.getItem('cart')) || [];
const cartContainer = document.getElementById('cartItems');
const totalDisplay = document.getElementById('cartTotal');
const checkoutBtn = document.getElementById('checkoutBtn');
const selectAllBox = document.getElementById('selectAll');

function renderCart(){
  cartContainer.innerHTML='';
  cart.forEach((item,index)=>{
    const div = document.createElement('div');
    div.className='cart-item';
    div.innerHTML = `
      <input type="checkbox" class="item-checkbox" data-index="${index}" checked>
      <button class="remove-btn" data-index="${index}" title="Remove"><i data-lucide="trash-2"></i></button>
      <img src="${item.img}" alt="${item.name}">
      <h2><i data-lucide="${item.icon || 'gift'}"></i> ${item.name}</h2>
      <p>Price: $${item.price}</p>
    `;
    cartContainer.appendChild(div);
  });
  lucide.createIcons();
  updateTotal();
  attachHandlers();
}

// Update total based on checked items
function updateTotal(){
  let total = 0;
  document.querySelectorAll('.item-checkbox').forEach(box=>{
    if(box.checked) total += cart[box.dataset.index].price;
  });
  totalDisplay.textContent = `Total: $${total}`;
}

// Attach remove buttons and checkbox change
function attachHandlers(){
  document.querySelectorAll('.remove-btn').forEach(btn=>{
    btn.onclick = ()=>{
      const index = btn.dataset.index;
      cart.splice(index,1);
      localStorage.setItem('cart',JSON.stringify(cart));
      renderCart();
    }
  });
  document.querySelectorAll('.item-checkbox').forEach(box=>{
    box.onchange = updateTotal;
  });
}

// Select all toggle
selectAllBox.onchange = ()=>{
  const checked = selectAllBox.checked;
  document.querySelectorAll('.item-checkbox').forEach(box=>box.checked = checked);
  updateTotal();
}

// Checkout
checkoutBtn.onclick = ()=>{
  const selectedItems = [];
  document.querySelectorAll('.item-checkbox').forEach(box=>{
    if(box.checked) selectedItems.push(cart[box.dataset.index]);
  });
  if(selectedItems.length===0) return alert("Please select at least one item!");
  
  const paypalEmail = "zxueondrugz@gmail.com";
  const itemsNote = encodeURIComponent(selectedItems.map(i=>i.name).join(", "));
  const amount = selectedItems.reduce((sum,i)=>sum+i.price,0);
  const url = `https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=${paypalEmail}&item_name=${itemsNote}&amount=${amount}&currency_code=USD`;
  window.open(url,'_blank');
}

renderCart();
</script>

</body>
</html>