<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CardsLawp | Gift Cards</title>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    /* ===== BASIC RESET ===== */
    * { margin:0; padding:0; box-sizing:border-box; font-family: 'Arial', sans-serif; }
    body { background:#f0f2f5; color:#333; }

    /* ===== NAVBAR ===== */
    .navbar {
      position: fixed; top:0; width:100%; display:flex; justify-content:space-between; align-items:center;
      padding:10px 30px; background:rgba(255,255,255,0.15); backdrop-filter:blur(10px); box-shadow:0 4px 6px rgba(0,0,0,0.1);
      z-index:1000; border-radius:0 0 15px 15px;
    }
    .navbar .logo { font-size:1.5em; font-weight:bold; color:#fff; }
    .navbar .nav-links a, .navbar .nav-links button {
      margin-left:20px; padding:8px 15px; border:none; background:rgba(255,255,255,0.25);
      color:#fff; border-radius:10px; cursor:pointer; text-decoration:none; transition:0.3s;
    }
    .navbar .nav-links a.active, .navbar .nav-links a:hover, .navbar .nav-links button:hover {
      background:rgba(255,255,255,0.45);
    }

    /* ===== HERO ===== */
    .hero { text-align:center; padding:150px 20px 50px; background:linear-gradient(to right, #667eea, #764ba2); color:#fff; }
    .hero h1 { font-size:3em; margin-bottom:20px; }
    .hero p { font-size:1.2em; margin-bottom:30px; }
    .hero .hero-btn { padding:12px 30px; border:none; border-radius:12px; background:#fff; color:#764ba2; font-weight:bold; cursor:pointer; transition:0.3s; }
    .hero .hero-btn:hover { background:#f0f0f0; }

    /* ===== CARDS ===== */
    .cards-container { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; padding:50px 20px; }
    .card { background:#fff; border-radius:15px; padding:15px; width:250px; text-align:center; box-shadow:0 8px 16px rgba(0,0,0,0.1); transition:0.3s; cursor:pointer; }
    .card img { width:100%; border-radius:10px; margin-bottom:10px; }
    .card h2 { font-size:1.2em; margin-bottom:5px; }
    .card p { font-size:0.9em; margin-bottom:10px; }
    .card button { padding:8px 15px; border:none; background:#667eea; color:#fff; border-radius:10px; cursor:pointer; transition:0.3s; }
    .card button:hover { background:#764ba2; }

    /* ===== MODAL ===== */
    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:2000; }
    .modal-content { background:#fff; border-radius:15px; padding:20px; max-width:400px; width:90%; text-align:center; position:relative; }
    .modal-content img { width:100%; border-radius:10px; margin-bottom:10px; }
    .modal-content .close { position:absolute; top:10px; right:15px; font-size:1.5em; cursor:pointer; }
    .modal-content .addCartBtn { padding:10px 20px; border:none; border-radius:12px; background:#667eea; color:#fff; cursor:pointer; transition:0.3s; }
    .modal-content .addCartBtn:hover { background:#764ba2; }

    /* ===== CART SIDEBAR ===== */
    #cartSidebar { position:fixed; top:0; right:-350px; width:350px; height:100%; background:#fff; box-shadow:-4px 0 15px rgba(0,0,0,0.1); padding:20px; transition:0.3s; z-index:1500; overflow-y:auto; }
    #cartSidebar h2, #cartSidebar h3 { margin-bottom:10px; }
    .cart-item { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
    .cart-item img { width:50px; height:50px; border-radius:10px; margin-right:10px; }
    .cart-item button { padding:5px 10px; border:none; border-radius:8px; background:#f44336; color:#fff; cursor:pointer; }
    .cart-item button:hover { background:#d32f2f; }
    #checkoutBtn { width:100%; padding:12px; border:none; border-radius:12px; background:#667eea; color:#fff; margin-top:10px; cursor:pointer; }
    #checkoutBtn:hover { background:#764ba2; }

    /* ===== FADE ANIMATION ===== */
    .fade { transition: all 0.5s ease; opacity:0; transform:translateY(30px); }

    /* ===== MOBILE RESPONSIVE ===== */
    @media (max-width: 768px) {
      .navbar { flex-direction: column; align-items: flex-start; padding: 10px 20px; border-radius: 0 0 10px 10px; }
      .navbar .nav-links { display: flex; flex-wrap: wrap; width: 100%; margin-top: 10px; gap: 10px; }
      .navbar .nav-links a, .navbar .nav-links button { margin-left: 0; flex: 1 1 45%; text-align: center; }
      .hero { padding:120px 20px 40px; }
      .hero h1 { font-size:2em; }
      .hero p { font-size:1em; }
      .hero .hero-btn { padding:10px 20px; font-size:0.95em; }
      .cards-container { flex-direction: column; align-items: center; padding: 30px 10px; gap: 15px; }
      .card { width: 90%; }
      .modal-content { max-width: 90%; padding: 15px; }
      #cartSidebar { width: 90%; right: -100%; }
      #cartSidebar.show { right: 0; }
    }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <div class="navbar">
    <div class="logo"><i data-lucide="credit-card"></i> CardsLawp</div>
    <div class="nav-links">
      <a href="/" class="active"><i data-lucide="home"></i> Home</a>
      <a href="/cart"><i data-lucide="shopping-cart"></i> Cart</a>
      <a href="/login"><i data-lucide="user"></i> Login</a>
    </div>
  </div>

  <!-- HERO -->
  <section class="hero fade">
    <h1><i data-lucide="gift"></i> Welcome to CardsLawp</h1>
    <p>Buy digital gift cards instantly â€” fast, secure, and verified.</p>
    <button class="hero-btn" onclick="scrollToCards()"><i data-lucide='shopping-bag'></i> Shop Now</button>
  </section>

  <!-- PRODUCTS -->
  <section class="cards-container fade" id="products"></section>

  <!-- CART SIDEBAR -->
  <div id="cartSidebar">
    <h2><i data-lucide="shopping-cart"></i> Your Cart</h2>
    <div id="cartItems"></div>
    <button id="checkoutBtn"><i data-lucide="credit-card"></i> Pay with PayPal</button>
  </div>

  <!-- PRODUCT MODAL -->
  <div class="modal" id="productModal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <img id="modalImage" src="" alt="">
      <h2 id="modalTitle"></h2>
      <p id="modalDesc"></p>
      <p id="modalPrice"></p>
      <button class="addCartBtn" id="modalAddBtn"><i data-lucide="plus-circle"></i> Add to Cart</button>
    </div>
  </div>

  <script>
    lucide.createIcons();

    // ===== SCROLL TO CARDS =====
    function scrollToCards() {
      document.getElementById('products').scrollIntoView({behavior: 'smooth'});
    }

    // ===== LOAD PRODUCTS =====
    document.addEventListener('DOMContentLoaded', () => {
      fetch('/api/items')
        .then(res => res.json())
        .then(items => {
          const container = document.querySelector('.cards-container');
          container.innerHTML = '';
          items.forEach(item => {
            const card = document.createElement('div');
            card.classList.add('card', 'fade');
            card.innerHTML = `
              <img src="${item.image}" alt="${item.name}">
              <h2>${item.name}</h2>
              <p>${item.description}</p>
              <p><b>$${item.price}</b></p>
              <button onclick="openModal('${item._id}', '${item.image}', '${item.name}', '${item.description}', ${item.price})">
                <i data-lucide="eye"></i> View
              </button>`;
            container.appendChild(card);
          });
          lucide.createIcons();
        });
    });

    // ===== MODAL =====
    function openModal(id, img, title, desc, price) {
      document.getElementById('modalImage').src = img;
      document.getElementById('modalTitle').innerText = title;
      document.getElementById('modalDesc').innerText = desc;
      document.getElementById('modalPrice').innerText = `$${price}`;
      document.getElementById('productModal').style.display = 'flex';
      document.getElementById('modalAddBtn').onclick = () => addToCart(id);
    }

    function closeModal() {
      document.getElementById('productModal').style.display = 'none';
    }

    // ===== CART =====
    function addToCart(id) {
      fetch('/api/cart/add', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({id})
      }).then(() => alert('Item added to cart!'));
    }

    // ===== FADE ANIMATIONS =====
    const isMobile = /Mobi|Android/i.test(navigator.userAgent);
    if (!isMobile) {
      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.remove('fade');
          else entry.target.classList.add('fade');
        });
      }, { threshold: 0.2 });
      document.querySelectorAll('.fade').forEach(el => observer.observe(el));
    }

    // ===== DYNAMIC MOBILE SCALING =====
    function adjustForScreen() {
      const w = window.innerWidth;
      const heroTitle = document.querySelector('.hero h1');
      const heroText = document.querySelector('.hero p');
      const heroBtn = document.querySelector('.hero .hero-btn');

      if (w < 500) {
        heroTitle.style.fontSize = '1.6em';
        heroText.style.fontSize = '0.9em';
        heroBtn.style.padding = '8px 15px';
        heroBtn.style.fontSize = '0.85em';
      } else if (w < 768) {
        heroTitle.style.fontSize = '2em';
        heroText.style.fontSize = '1em';
        heroBtn.style.padding = '10px 20px';
        heroBtn.style.fontSize = '0.95em';
      }

      document.querySelectorAll('.card').forEach(card => {
        if (w < 500) card.style.width = '95%';
        else if (w < 768) card.style.width = '90%';
        else card.style.width = '250px';
      });
    }

    adjustForScreen();
    window.addEventListener('resize', adjustForScreen);
  </script>
</body>
</html>