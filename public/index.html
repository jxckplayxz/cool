<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CardsLawp | Gift Cards</title>
<script src="https://unpkg.com/lucide@latest"></script>
<style>
  /* BASIC RESET */
  * { margin:0; padding:0; box-sizing:border-box; font-family: 'Arial', sans-serif; }
  body { background:#f0f2f5; color:#333; }

  /* NAVBAR */
  .navbar {
    position: fixed; top:0; width:100%; display:flex; justify-content:space-between; align-items:center;
    padding:10px 30px; background:rgba(255,255,255,0.15); backdrop-filter:blur(10px); box-shadow:0 4px 6px rgba(0,0,0,0.1);
    z-index:1000; border-radius:0 0 15px 15px;
  }
  .navbar .logo { font-size:1.5em; font-weight:bold; color:#fff; }
  .navbar .nav-links a { margin-left:20px; padding:8px 15px; border:none; background:rgba(255,255,255,0.25);
    color:#fff; border-radius:10px; cursor:pointer; text-decoration:none; transition:0.3s; }
  .navbar .nav-links a:hover, .navbar .nav-links a.active { background:rgba(255,255,255,0.45); }

  /* HERO */
  .hero { text-align:center; padding:150px 20px 50px; background:linear-gradient(to right, #667eea, #764ba2); color:#fff; }
  .hero h1 { font-size:3em; margin-bottom:20px; }
  .hero p { font-size:1.2em; margin-bottom:30px; }
  .hero .hero-btn { padding:12px 30px; border:none; border-radius:12px; background:#fff; color:#764ba2; font-weight:bold; cursor:pointer; transition:0.3s; }
  .hero .hero-btn:hover { background:#f0f0f0; }

  /* CARDS */
  .cards-container { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; padding:50px 20px; }
  .card { background:#fff; border-radius:15px; padding:15px; width:250px; text-align:center; box-shadow:0 8px 16px rgba(0,0,0,0.1); transition:0.3s; cursor:pointer; }
  .card img { width:100%; border-radius:10px; margin-bottom:10px; }
  .card h2 { font-size:1.2em; margin-bottom:5px; }
  .card p { font-size:0.9em; margin-bottom:10px; }
  .card button { padding:8px 15px; border:none; background:#667eea; color:#fff; border-radius:10px; cursor:pointer; transition:0.3s; }
  .card button:hover { background:#764ba2; }

  /* MODAL */
  .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:2000; }
  .modal-content { background:#fff; border-radius:15px; padding:20px; max-width:400px; width:90%; text-align:center; position:relative; }
  .modal-content img { width:100%; border-radius:10px; margin-bottom:10px; }
  .modal-content .close { position:absolute; top:10px; right:15px; font-size:1.5em; cursor:pointer; }
  .modal-content .addCartBtn { padding:10px 20px; border:none; border-radius:12px; background:#667eea; color:#fff; cursor:pointer; transition:0.3s; }
  .modal-content .addCartBtn:hover { background:#764ba2; }

  /* MOBILE RESPONSIVE (IMPROVED) */
  @media (max-width: 768px) {
    body { font-size: 4vw; }
    .navbar { flex-direction: column; align-items: center; padding: 10px 5vw; }
    .navbar .nav-links { width: 100%; flex-wrap: wrap; justify-content: center; gap: 5vw; }
    .navbar .nav-links a { flex: 1 1 40%; font-size: 3vw; }
    .hero { padding: 20vh 5vw 10vh; }
    .hero h1 { font-size: 8vw; }
    .hero p { font-size: 4vw; }
    .hero .hero-btn { padding: 3vw 6vw; font-size: 4vw; }
    .cards-container { padding: 10vh 5vw; gap: 5vw; }
    .card { width: 90%; padding: 4vw; }
    .card h2 { font-size: 4vw; }
    .card p { font-size: 3.5vw; }
    .card button { font-size: 3.5vw; padding: 2vw 4vw; }
    .modal-content { width: 90%; padding: 5vw; }
  }
</style>
</head>
<body>
  <!-- NAVBAR -->
  <div class="navbar">
    <div class="logo"><i data-lucide="credit-card"></i> CardsLawp</div>
    <div class="nav-links">
      <a href="/" class="active"><i data-lucide="home"></i> Home</a>
      <a href="/cart"><i data-lucide="shopping-cart"></i> Cart</a>
      <a href="/login"><i data-lucide="user"></i> Login</a>
    </div>
  </div>

  <!-- HERO -->
  <section class="hero fade">
    <h1><i data-lucide="gift"></i> Welcome to CardsLawp</h1>
    <p>Buy digital gift cards instantly â€” fast, secure, and verified.</p>
    <button class="hero-btn" onclick="scrollToCards()"><i data-lucide='shopping-bag'></i> Shop Now</button>
  </section>

  <!-- PRODUCTS -->
  <section class="cards-container fade" id="products"></section>

  <!-- PRODUCT MODAL -->
  <div class="modal" id="productModal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <img id="modalImage" src="" alt="">
      <h2 id="modalTitle"></h2>
      <p id="modalDesc"></p>
      <p id="modalPrice"></p>
      <button class="addCartBtn" id="modalAddBtn"><i data-lucide="plus-circle"></i> Add to Cart</button>
    </div>
  </div>

<script>
function scrollToCards() {
  document.getElementById('products').scrollIntoView({behavior:'smooth'});
}

function openModal(id,img,title,desc,price){
  document.getElementById('modalImage').src = img;
  document.getElementById('modalTitle').innerText = title;
  document.getElementById('modalDesc').innerText = desc;
  document.getElementById('modalPrice').innerText = `$${price}`;
  document.getElementById('productModal').style.display = 'flex';
  document.getElementById('modalAddBtn').onclick = ()=>addToCart(id);
}

function closeModal(){
  document.getElementById('productModal').style.display = 'none';
}

function addToCart(id){
  fetch('/api/cart/add',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({id})
  }).then(()=>alert('Item added to cart!'));
}

// ===== LOAD ITEMS =====
document.addEventListener('DOMContentLoaded', ()=>{
  const container = document.getElementById('products');
  fetch('/api/items')
    .then(res=>res.json())
    .then(items=>{
      container.innerHTML='';
      items.forEach(item=>{
        const card = document.createElement('div');
        card.classList.add('card','fade');

        const img = document.createElement('img');
        img.src = item.image; img.alt = item.name;

        const title = document.createElement('h2');
        title.innerText = item.name;

        const desc = document.createElement('p');
        desc.innerText = item.description;

        const price = document.createElement('p');
        price.innerHTML = `<b>$${item.price}</b>`;

        const btn = document.createElement('button');
        btn.innerHTML = `<i data-lucide="eye"></i> View`;
        btn.addEventListener('click', ()=>openModal(item._id,item.image,item.name,item.description,item.price));

        card.append(img,title,desc,price,btn);
        container.appendChild(card);
      });
      lucide.createIcons(); // render icons after cards exist
    });
});
</script>
</body>
</html>