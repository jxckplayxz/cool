<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CardsLawp - Gift Cards</title>
    <link rel="stylesheet" href="/style.css">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <header class="navbar glassy">
        <div class="logo-area">
            <h1><i data-lucide="credit-card"></i> CardsLawp</h1>
        </div>
        <nav>
            <a href="/"><i data-lucide="home"></i> Home</a>
            <a href="/cart"><i data-lucide="shopping-cart"></i> Cart</a>
            <a href="/login"><i data-lucide="user"></i> Login</a>
        </nav>
    </header>

    <section id="products" class="fade-section">
        <h2><i data-lucide="gift"></i> Available Gift Cards</h2>
        <div class="product-grid" id="product-grid"></div>
    </section>

    <footer class="footer glassy">
        <p><i data-lucide="mail"></i> Contact us: support@cardslawp.com</p>
        <p><i data-lucide="shield"></i> Secure Checkout â€¢ PayPal Verified</p>
    </footer>

    <script>
        // Load products
        fetch('/api/items')
            .then(res => res.json())
            .then(items => {
                const grid = document.getElementById('product-grid');
                items.forEach(item => {
                    const card = document.createElement('div');
                    card.classList.add('product-card');
                    card.innerHTML = `
                        <img src="${item.image}" alt="${item.name}">
                        <h3><i data-lucide="gift"></i> ${item.name}</h3>
                        <p>${item.description}</p>
                        <p class="price">$${item.price}</p>
                        <button onclick="addToCart('${item._id}')"><i data-lucide="shopping-bag"></i> Add to Cart</button>
                    `;
                    grid.appendChild(card);
                });
                lucide.createIcons(); // render icons dynamically
            });

        function addToCart(id) {
            fetch('/api/cart/add', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({id})
            }).then(res => res.json()).then(() => alert('Added to cart!'));
        }

        // Disable animations on mobile
        const isMobile = /Mobi|Android/i.test(navigator.userAgent);
        if (!isMobile) {
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    } else {
                        entry.target.classList.remove('visible');
                    }
                });
            }, {threshold: 0.1});
            document.querySelectorAll('.fade-section, .product-card').forEach(el => observer.observe(el));
        }

        // Initialize icons
        lucide.createIcons();
    </script>
</body>
</html>